<div class="relative w-full h-full">
  <div class="w-full h-full bg-white rounded-[10px] shadow-md">
    <div class="relative w-full h-full">
      <div class="w-full h-full">
        <div class="relative w-full h-full">
          <!-- Food Image -->
          <div class="relative w-full h-[200px]">
            <img 
              [src]="item.item_image_url" 
              [alt]="item.item_name"
              class="w-full h-full object-cover rounded-t-[10px]"
              onerror="this.src='assets/images/broken-image-menu.jpg'"
            />
          </div>

          <!-- Food Info -->
          <div class="p-4">
            <div class="flex justify-between items-start">
              <div class="flex flex-col gap-2">
                <h3 class="text-[16px] font-semibold">{{item.item_name}}</h3>
                <div class="flex items-center gap-2">
                  <!-- Price -->
                  <p class="text-[14px]">
                    {{item.price | currency:'INR'}}
                  </p>
                  <!-- Calories if available -->
                  @if (item.nutrition) {
                    <p class="text-[12px] text-gray-500">
                      {{item.nutrition?.calories?.amount}} kcal
                    </p>
                  }
                </div>
              </div>

              <!-- Heart Icon -->
              <button 
                class="p-2 hover:bg-gray-100 rounded-full"
                (click)="$event.stopPropagation()">
                <i class="fa-regular"
                   [ngClass]="{
                     'fa-heart': !itemFavorite,
                     'fa-solid': itemFavorite,
                     'text-red-500': itemFavorite
                   }">
                </i>
              </button>
            </div>

            <!-- Action Buttons -->
            <div class="flex justify-between mt-4">
              <button 
                class="px-4 py-2 text-sm bg-gray-100 rounded-md hover:bg-gray-200"
                (click)="showFoodInfo(item._id)">
                Info
              </button>
              <button 
                class="px-4 py-2 text-sm bg-primary text-white rounded-md hover:bg-primary-dark"
                (click)="showMenuPopup(item._id)">
                Add to Cart
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Popups -->
  @if (isShowFoodPopUp === item._id) {
    <app-food-info-popup
      [item]="item"
      (close)="closePopup()">
    </app-food-info-popup>
  }

  @if (isShowMenuPopUp === item._id) {
    <app-menu-popup
      [item]="item"
      [itemFavorite]="itemFavorite"
      (close)="closePopup()"
      (setFavoriteItems)="setFavoriteItems($event)"
      (onVariationSelect)="handleVariationSelect($event)">
    </app-menu-popup>
  }
</div> 